<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<style type="text/css">
#picturebox {
	height: 90px;
	width: 80px;
	margin-top: 5px;
	margin-right: 5px;
	margin-bottom: 5px;
	margin-left: 20px;
	float: left;
	border: 1px double #CCC;
}
#picturebutton {
	float: left;
	height: 30px;
	width: 150px;
	margin-top: 20px;
	margin-left: 20px;
}

</style>
<script src="js/jquery-1.6.min.js" type="text/javascript">
        </script>
		<script type="text/javascript" src="js/ajaxfileupload.js"></script>
</head>

<body>
 <div id="acerca" onclick="closeBox();" class="scroll-pane">
<div id="">
<div id="picturebox"></div>
<div id="picturebutton">
                <input name="fileToUpload" type="file" id="fileToUpload"  size="5" />
                <input name="image" type="hidden" id="image" value="">
              </div>
</div>

</body>
</html>

<script>

$(document).ready(function(){
						   



	// Save img
	$("#fileToUpload").click(function(event){

	});


	$('#fileToUpload').change(function() {
	  
		//alert($("#fileToUpload").val());	
		
		if(isImage($("#fileToUpload").val())){
			
 			//alert(this.files[0].size/1024+ ' KB');			
			if( parseInt(this.files[0].size/1024) >= 50) {
			   alert("Image size is too much long\nSize much within 100 KB");	
			} else {
				ajaxFileUpload();
				event.preventDefault();
				$('#amge').remove();
				$("#fileToUpload").replaceWith("<input type='file' id='fileToUpload' size='5' />");
			}	
			
		} else {
			alert("Please Select image only");
		}		

	});	
	
	
	


	// enf father name wise



	// enf father id wise

			
});


	
</script>

<script type="text/javascript">
	function ajaxFileUpload()
	{
		$("#loading")
		.ajaxStart(function(){
			$(this).show();
		})
		.ajaxComplete(function(){
			$(this).hide();
		});
		
		var admno = $('#admno').val();
		 var url = "doajaxfileupload.php?admno="+admno;

		var data ={admno: admno, description:'short description'}


		$.ajaxFileUpload
		(
			{
				url: url,
				type: "POST", 
				secureuri:false,				
				fileElementId: 'fileToUpload',
				dataType: 'json',
				success: function (data, status)
				{
					if(typeof(data.error) != 'undefined')
					{
						if(data.error != '')
						{
							alert(data.error);
						}else
						{
							
							//$("#NowUpload").load("ajaxfileupload.php");
							//$("#ImageList").load("imagelist.php");
							//alert(data.msg);
							$('#amge').remove();
							$('#picturebox').append('<img id="amge" src="primages/' + data.msg + '" src="" width="77" height="87" />');
							$("#fileToUpload").val("");							
							$("#image").val($.trim(data.msg));
							//alert(data.msg);
							
							$('#superbox').hide();
						}
					}
				},
				error: function (data, status, e)
				{
					alert(e);
				}
			}
		)
		
		return false;

	}
	
	
	
function closeBox() {
        window.parent.$.superbox.close();
    }
	
	function getExtension(filename) {
		var parts = filename.split('.');
		return parts[parts.length - 1];
	}

	
		function isImage(filename) {
			var ext = getExtension(filename);
			switch (ext.toLowerCase()) {
			case 'jpg':
			case 'gif':
			case 'bmp':
			case 'png':
				//etc
				return true;
			}
			return false;
		}
		



	</script>
